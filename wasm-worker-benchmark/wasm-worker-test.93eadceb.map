{"version":3,"sources":["node_modules/wasm-worker/lib/actions.js","node_modules/wasm-worker/lib/worker.js","node_modules/wasm-worker/lib/utils.js","node_modules/wasm-worker/lib/index.js","index.ts"],"names":[],"mappings":"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","file":"wasm-worker-test.93eadceb.map","sourceRoot":"..","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nvar ACTIONS = {\n  COMPILE_MODULE: 0,\n  CALL_FUNCTION_EXPORT: 1,\n  RUN_FUNCTION: 2\n};\n\nexports[\"default\"] = ACTIONS;","'use strict';\n\nexports.__esModule = true;\nexports['default'] = worker;\nfunction worker(e) {\n  var _e$data = e.data,\n      id = _e$data.id,\n      action = _e$data.action,\n      payload = _e$data.payload;\n\n\n  var sendMessage = function sendMessage(result, data) {\n    self.postMessage({\n      id: id,\n      action: action,\n      result: result,\n      payload: data\n    });\n  };\n\n  var onError = function onError(ex) {\n    return sendMessage(1, '' + ex);\n  };\n  var onSuccess = sendMessage.bind(null, 0);\n\n  if (action === ACTIONS.COMPILE_MODULE) {\n    Promise.resolve().then(function () {\n      var res = void 0;\n      if (getImportObject !== undefined) {\n        importObject = getImportObject();\n      }\n\n      if (typeof payload === 'string') {\n        res = fetch(payload);\n        if (WebAssembly.instantiateStreaming !== undefined) {\n          return WebAssembly.instantiateStreaming(res, importObject);\n        }\n        res = res.then(function (response) {\n          return response.arrayBuffer();\n        });\n      } else {\n        res = Promise.resolve(payload);\n      }\n\n      return res.then(function (buff) {\n        return WebAssembly.compile(buff);\n      }).then(function (module) {\n        return WebAssembly.instantiate(module, importObject).then(function (instance) {\n          return { module: module, instance: instance };\n        });\n      });\n    }).then(function (_ref) {\n      var module = _ref.module,\n          instance = _ref.instance;\n\n      moduleInstance = instance;\n\n      wasmModule = module;\n      onSuccess({\n        exports: WebAssembly.Module.exports(module).filter(function (exp) {\n          return exp.kind === 'function';\n        }).map(function (exp) {\n          return exp.name;\n        })\n      });\n    })['catch'](onError);\n  } else if (action === ACTIONS.CALL_FUNCTION_EXPORT) {\n    var func = payload.func,\n        params = payload.params;\n\n\n    Promise.resolve().then(function () {\n      var ctx = moduleInstance.exports;\n\n      onSuccess(ctx[func].apply(ctx, params));\n    })['catch'](onError);\n  } else if (action === ACTIONS.RUN_FUNCTION) {\n    var _func = payload.func,\n        _params = payload.params;\n\n\n    Promise.resolve().then(function () {\n      var fun = new Function('return ' + _func)();\n      onSuccess(fun({\n        module: wasmModule,\n        instance: moduleInstance,\n        importObject: importObject,\n        params: _params\n      }));\n    })['catch'](onError);\n  }\n}","'use strict';\n\nexports.__esModule = true;\nvar getWasmSource = exports.getWasmSource = function getWasmSource(source) {\n  var result = source;\n\n  if (typeof result === 'string' && typeof location !== 'undefined') {\n    result = result.trim();\n    if (result.indexOf('/') === 0) {\n      result = location.origin + result;\n    } else if (result.indexOf('http') !== 0) {\n      result = location.href + (location.href[location.href.length - 1] === '/' ? '' : '/') + result;\n    }\n  }\n\n  return result;\n};","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = wasmWorker;\n\nvar _actions = require('./actions');\n\nvar _actions2 = _interopRequireDefault(_actions);\n\nvar _worker = require('./worker');\n\nvar _worker2 = _interopRequireDefault(_worker);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar getTransferableParams = function getTransferableParams() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return params.filter(function (x) {\n    return x instanceof ArrayBuffer || x instanceof MessagePort || x instanceof ImageBitmap;\n  });\n};\n\nfunction wasmWorker(source) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var currentId = 0;\n  var promises = {};\n\n  var getImportObject = options.getImportObject,\n      otherOptions = _objectWithoutProperties(options, ['getImportObject']);\n\n  var worker = new Worker('data:,ACTIONS=' + JSON.stringify(_actions2['default']) + ';getImportObject=' + getImportObject + ';' + ('importObject=undefined;wasmModule=null;moduleInstance=null;onmessage=' + _worker2['default']), otherOptions);\n\n  worker.onmessage = function (e) {\n    var _e$data = e.data,\n        id = _e$data.id,\n        result = _e$data.result,\n        action = _e$data.action,\n        payload = _e$data.payload;\n\n\n    if (action === _actions2['default'].COMPILE_MODULE) {\n      if (result === 0) {\n        var exports = payload.exports;\n\n\n        promises[id][0]({\n          exports: exports.reduce(function (acc, exp) {\n            return _extends({}, acc, _defineProperty({}, exp, function () {\n              for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {\n                params[_key] = arguments[_key];\n              }\n\n              return new Promise(function () {\n                for (var _len2 = arguments.length, rest = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  rest[_key2] = arguments[_key2];\n                }\n\n                promises[++currentId] = rest;\n                worker.postMessage({\n                  id: currentId,\n                  action: _actions2['default'].CALL_FUNCTION_EXPORT,\n                  payload: {\n                    func: exp,\n                    params: params\n                  }\n                }, getTransferableParams(params));\n              });\n            }));\n          }, {}),\n          run: function run(func, params) {\n            return new Promise(function () {\n              for (var _len3 = arguments.length, rest = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                rest[_key3] = arguments[_key3];\n              }\n\n              promises[++currentId] = rest;\n              worker.postMessage({\n                id: currentId,\n                action: _actions2['default'].RUN_FUNCTION,\n                payload: {\n                  func: func.toString(),\n                  params: params\n                }\n              }, getTransferableParams(params));\n            });\n          }\n        });\n      } else if (result === 1) {\n        promises[id][1](payload);\n      }\n    } else if (action === _actions2['default'].CALL_FUNCTION_EXPORT || action === _actions2['default'].RUN_FUNCTION) {\n      promises[id][result](payload);\n    }\n\n    promises[id] = null;\n  };\n\n  return new Promise(function () {\n    for (var _len4 = arguments.length, params = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      params[_key4] = arguments[_key4];\n    }\n\n    promises[++currentId] = [].concat(params);\n\n    worker.postMessage({\n      id: currentId,\n      action: _actions2['default'].COMPILE_MODULE,\n      payload: (0, _utils.getWasmSource)(source)\n    });\n  });\n}","import wasmWorker from 'wasm-worker';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport { resolve } from 'url';\r\n\r\n(async () => {\r\n    const options = {\r\n        getImportObject: () => {\r\n            return {\r\n                fib_js: () => {\r\n                    const fib = (curr: number, next: number, n: number): number => {\r\n                        if (n == 0) {\r\n                            return curr;\r\n                        }\r\n                        else {\r\n                            return fib(next, curr + next, n - 1);\r\n                        }\r\n                    }\r\n\r\n                    for (let i = 0; i < 50; i++)\r\n                        for (let j = 0; j < 4000; j++) fib(0, 1, j);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    const wasm = await wasmWorker('optimized.wasm', options);\r\n    const wasm_direct = (await WebAssembly.instantiateStreaming(await fetch('optimized.wasm'))).instance;\r\n\r\n    const fib = (curr: number, next: number, n: number): number => {\r\n        if (n == 0) {\r\n            return curr;\r\n        }\r\n        else {\r\n            return fib(next, curr + next, n - 1);\r\n        }\r\n    }\r\n\r\n    const log = document.getElementById('log');\r\n    const show_log = text => log.appendChild(document.createElement('div'))\r\n        .appendChild(document.createTextNode(text));\r\n    const show_title = text => {\r\n        const div = document.createElement('h3');\r\n        div.className = 'mt-3';\r\n        log.appendChild(div).appendChild(document.createTextNode(text));\r\n    }\r\n\r\n    show_log('Loop: 4000 * 50');\r\n    show_title('Test ' + 1);\r\n\r\n\r\n\r\n    const msg = ['js loop: ',\r\n        'wasm with js loop (direct): ',\r\n        'wasm with wasm loop (direct): ',\r\n        'js loop with wasm-worker: ',\r\n        'wasm with js loop and wasm-worker (direct): ',\r\n        'wasm with wasm loop and wasm-worker (direct): ',\r\n        'wasm with js loop and wasm-worker (with js function): ',\r\n        'wasm with wasm loop and wasm-worker (with js function): ',\r\n        'half wasm loop (direct) and half wasm loop (wasm-worker with js function): ',\r\n        'pre-declared function with js loop: ',\r\n        'web-worker overhead: '\r\n    ];\r\n\r\n    const arr = new Float64Array(msg.length);\r\n    arr.fill(0);\r\n\r\n    let fib_promise, fib_promise2, promises, t0, t1;\r\n    const func = new Array();\r\n\r\n    func[0] = () => {\r\n        return new Promise(resolve => {\r\n            const t2 = performance.now();\r\n            for (let i = 0; i < 50; i++)\r\n                for (let j = 0; j < 4000; j++) fib(0, 1, j);\r\n            const t3 = performance.now();\r\n            resolve();\r\n        })\r\n    }\r\n\r\n    func[1] = () => {\r\n        return new Promise(resolve => {\r\n            for (let i = 0; i < 50; i++)\r\n                for (let j = 0; j < 4000; j++) wasm_direct.exports.fib_ext(0, 1, j);\r\n            resolve();\r\n        })\r\n    }\r\n\r\n    func[2] = () => {\r\n        return new Promise(resolve => {\r\n            wasm_direct.exports.fib_loop_full();\r\n            resolve();\r\n        })\r\n    }\r\n\r\n    func[3] = async () => {\r\n        await wasm.run(() => {\r\n            const fib = (curr: number, next: number, n: number): number => {\r\n                if (n == 0) {\r\n                    return curr;\r\n                }\r\n                else {\r\n                    return fib(next, curr + next, n - 1);\r\n                }\r\n            }\r\n\r\n            for (let i = 0; i < 50; i++)\r\n                for (let j = 0; j < 4000; j++) fib(0, 1, j);\r\n        });\r\n    }\r\n\r\n    func[4] = async () => {\r\n        fib_promise = async n => wasm.exports.fib_ext(0, 1, n);\r\n        promises = new Array();\r\n        for (let i = 0; i < 50; i++)\r\n            for (let j = 0; j < 4000; j++) promises.push(fib_promise(j));\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    func[5] = async () => {\r\n        fib_promise = async () => wasm.exports.fib_loop();\r\n        promises = new Array();\r\n        for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    func[6] = async () => {\r\n        fib_promise = async () => wasm.run(({ instance }) => {\r\n            for (let i = 0; i < 4000; i++) instance.exports.fib_ext(0, 1, i);\r\n        });\r\n        promises = new Array();\r\n        for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    func[7] = async () => {\r\n        fib_promise = async () => wasm.run(({ instance }) => {\r\n            instance.exports.fib_loop();\r\n        });\r\n        promises = new Array();\r\n        for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    func[8] = async () => {\r\n        fib_promise = async () => wasm.run(({ instance }) => {\r\n            instance.exports.fib_loop();\r\n        });\r\n        const fib_promise2 = () => {\r\n            return new Promise(resolve => {\r\n                wasm_direct.exports.fib_loop();\r\n                resolve();\r\n            })\r\n        };\r\n        promises = new Array();\r\n        for (let i = 0; i < 25; i++) promises.push(fib_promise());\r\n        for (let i = 0; i < 25; i++) promises.push(fib_promise2());\r\n        await Promise.all(promises);\r\n    }\r\n\r\n    func[9] = async () => {\r\n        await wasm.run(({ importObject }) => {\r\n            importObject.fib_js();\r\n        });\r\n    }\r\n\r\n    func[10] = async () => {\r\n        await wasm.run((params) => {\r\n            const sum = params[1] - params[0];\r\n            return sum;\r\n        }, [1, 2]);\r\n    }\r\n\r\n    const benchmark = async count => {\r\n        for (let i = 0; i < func.length; i++) {\r\n            t0 = performance.now();\r\n            await func[i]();\r\n            t1 = performance.now();\r\n            show_log(msg[i] + (t1 - t0) + ' ms');\r\n            arr[i] += t1 - t0;\r\n        }\r\n\r\n        show_title('Test ' + (count + 1));\r\n        count++;\r\n        if (count > 10) {\r\n            show_title('Average');\r\n            for (let i = 0; i < msg.length; i++) show_log(msg[i] + (arr[i] / 10) + ' ms');\r\n        } else {\r\n            setTimeout(() => {\r\n                benchmark(count);\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    const code = document.getElementById('code');\r\n    code.value =\r\n        `       func[0] = () => {\r\n            return new Promise(resolve => {\r\n                const t2 = performance.now();\r\n                for (let i = 0; i < 50; i++)\r\n                    for (let j = 0; j < 4000; j++) fib(0, 1, j);\r\n                const t3 = performance.now();\r\n                resolve();\r\n            })\r\n        }\r\n    \r\n        func[1] = () => {\r\n            return new Promise(resolve => {\r\n                for (let i = 0; i < 50; i++)\r\n                    for (let j = 0; j < 4000; j++) wasm_direct.exports.fib_ext(0, 1, j);\r\n                resolve();\r\n            })\r\n        }\r\n    \r\n        func[2] = () => {\r\n            return new Promise(resolve => {\r\n                wasm_direct.exports.fib_loop_full();\r\n                resolve();\r\n            })\r\n        }\r\n    \r\n        func[3] = async () => {\r\n            await wasm.run(() => {\r\n                const fib = (curr: number, next: number, n: number): number => {\r\n                    if (n == 0) {\r\n                        return curr;\r\n                    }\r\n                    else {\r\n                        return fib(next, curr + next, n - 1);\r\n                    }\r\n                }\r\n    \r\n                for (let i = 0; i < 50; i++)\r\n                    for (let j = 0; j < 4000; j++) fib(0, 1, j);\r\n            });\r\n        }\r\n    \r\n        func[4] = async () => {\r\n            fib_promise = async n => wasm.exports.fib_ext(0, 1, n);\r\n            promises = new Array();\r\n            for (let i = 0; i < 50; i++)\r\n                for (let j = 0; j < 4000; j++) promises.push(fib_promise(j));\r\n            await Promise.all(promises);\r\n        }\r\n    \r\n        func[5] = async () => {\r\n            fib_promise = async () => wasm.exports.fib_loop();\r\n            promises = new Array();\r\n            for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n            await Promise.all(promises);\r\n        }\r\n    \r\n        func[6] = async () => {\r\n            fib_promise = async () => wasm.run(({ instance }) => {\r\n                for (let i = 0; i < 4000; i++) instance.exports.fib_ext(0, 1, i);\r\n            });\r\n            promises = new Array();\r\n            for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n            await Promise.all(promises);\r\n        }\r\n    \r\n        func[7] = async () => {\r\n            fib_promise = async () => wasm.run(({ instance }) => {\r\n                instance.exports.fib_loop();\r\n            });\r\n            promises = new Array();\r\n            for (let i = 0; i < 50; i++) promises.push(fib_promise());\r\n            await Promise.all(promises);\r\n        }\r\n    \r\n        func[8] = async () => {\r\n            fib_promise = async () => wasm.run(({ instance }) => {\r\n                instance.exports.fib_loop();\r\n            });\r\n            const fib_promise2 = () => {\r\n                return new Promise(resolve => {\r\n                    wasm_direct.exports.fib_loop();\r\n                    resolve();\r\n                })\r\n            };\r\n            promises = new Array();\r\n            for (let i = 0; i < 25; i++) promises.push(fib_promise());\r\n            for (let i = 0; i < 25; i++) promises.push(fib_promise2());\r\n            await Promise.all(promises);\r\n        }\r\n    \r\n        func[9] = async () => {\r\n            await wasm.run(({ importObject }) => {\r\n                importObject.fib_js();\r\n            });\r\n        }\r\n    \r\n        func[10] = async () => {\r\n            await wasm.run((params) => {\r\n                const sum = params[1] - params[0];\r\n                return sum;\r\n            }, [1, 2]);\r\n        }`;\r\n\r\n    setTimeout(async () => {\r\n        benchmark(1);\r\n    }, 100);\r\n})();\r\n"]}